{
  "selected_problem": {
    "problem_id": "No7_revised",
    "difficulty": 7,
    "description": "キーボードから入力された自然数nに対し、n行n列の行列を動的に確保し、各要素に1からn*nまでの自然数を順に代入するプログラムを作成してください。その後、この行列を表示し、さらに、各行の要素の合計を計算し、表示してください。メモリリークが発生しないように注意し、動的に確保したメモリはすべて解放してください。エラー処理は必須ではありません。",
    "reason": "この問題は、動的メモリ確保、2次元配列の操作、ループ処理、合計計算など、複数の重要なC言語の概念を統合的に学習できるよう設計されています。学習者は、これらの概念を理解し、それらを組み合わせて問題を解決する能力を養うことができます。難易度7は、これらの概念を習得している学習者にとって適切な挑戦となるでしょう。メモリリークへの配慮も求めることで、実践的なプログラミングスキルを養うことを期待します。",
    "examples": [
      {
        "input": "3",
        "output": "1 2 3\n4 5 6\n7 8 9\n行ごとの合計:\n6\n15\n24",
        "explanation": "入力された自然数nが3の場合、3行3列の行列が作成され、各要素に1から9までの自然数が順に代入されます。その後、行列が表示され、各行の要素の合計が計算され、表示されます。"
      }
    ],
    "learning_objectives": [
      "2次元配列の動的メモリ確保",
      "2次元配列へのデータの入力",
      "2次元配列の表示",
      "各行の要素の合計計算",
      "動的メモリの解放",
      "メモリリークの防止"
    ]
  },
  "reasoning": "3つの問題候補の中で、この問題が学習者の能力と最も適合すると判断しました。他の問題も有用ですが、この問題は、動的メモリ確保、2次元配列操作、合計計算といった複数の重要な概念をバランスよく含んでおり、学習効果が高いと考えられます。また、メモリリークへの配慮も盛り込むことで、より実践的なスキルを養うことができます。問題文も明確で、学習者が取り組みやすいように工夫されています。",
  "improvements": [
    "エラー処理の有無を明示的に記述する",
    "入力値のバリデーションを追加する（nが0以下の場合の処理）",
    "より詳細なエラーメッセージを表示する仕組みを追加する（メモリ確保失敗時など）"
  ]
}